model Patient {
  id                     String    @id @default(uuid()) 
  clinicId               String?   
  firstNameCipher        String?    
  lastNameCipher         String?   
  phoneCipher            String?   
  emailCipher            String?   
  insuranceIdCipher      String?   
  addressCipher          String?   
  emergencyContactCipher String?   
  dateOfBirth            DateTime?  
  gender                 Gender?
  bloodGroup             String?   
  conditionName          String?   
  diagnosedDate          DateTime?  
  severity               String?   
  status                 String?   
  retentionExpiresAt     DateTime? 
  createdAt              DateTime? @default(now())  
  updatedAt              DateTime? @updatedAt  
  deletedAt              DateTime?  
  firstNameBlind         String?    
  lastNameBlind          String?   
  insuranceIdBlind       String?    

  // Relations
  clinic            Clinic?            @relation(fields: [clinicId], references: [id])
  appointments      Appointment[]
  calls             Call[]
  labs              Lab[]
  prescriptions     Prescription[]
  tasks             Task[]
  dataRequests      DataRequest[]
  emergencyContacts EmergencyContact[]
  diagnoses         Diagnosis[]
  consents          PatientConsent[]

  @@map("patients")
}

model EmergencyContact {
  id           String    @id @default(uuid()) 
  patientId    String?   
  nameCipher   String?   
  relationship String?   
  phoneCipher  String?   
  createdAt    DateTime? @default(now())  
  updatedAt    DateTime? @updatedAt  

  patient Patient? @relation(fields: [patientId], references: [id])

  @@map("emergency_contacts")
}